(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6002"],{"1afb":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("Navbar"),r("div",{staticClass:"py-5 container text-left"},[r("h2",{staticClass:"mt-5 mb-4"},[e._v("我的預約")]),r("div",{staticClass:"row card-deck"},e._l(e.reserveList,(function(t){return r("div",{key:t.id,staticClass:"col-md-4 mb-4"},[r("div",{staticClass:"card opacity__background frosted__glass"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[e._v(e._s(t.room.name))]),r("p",{staticClass:"card-text"},[e._v("預約的時段.")]),r("span",{},[e._v("From")]),r("input",{staticClass:"btn-gray btn-block mt-1 mb-3",attrs:{href:"#",disabled:""},domProps:{value:e._f("time")(t.from)}}),r("span",{},[e._v("To")]),r("input",{staticClass:"btn-gray btn-block mt-1 mb-3",attrs:{href:"#",disabled:""},domProps:{value:e._f("time")(t.to)}}),r("button",{staticClass:"btn btn-warning",attrs:{disabled:e.isProcessing},on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.deleteReserve({time:t.from,id:t.id})}}},[e._v(" "+e._s(e.isProcessing?"處理中...":"取消預約")+" ")])])])])})),0),r("div",{staticClass:"row"},[r("h5",{directives:[{name:"show",rawName:"v-show",value:!e.reserveList.length,expression:"!reserveList.length"}],staticClass:"p-3 card-text"},[e._v("尚未預約任何時段.")])])])],1)},a=[],n=r("1da1"),i=r("5530"),c=(r("96cf"),r("d178")),o=r("0ebf"),u=r("2f62"),l=r("2fa3"),d=r("c1df"),v=r.n(d),f=r("1315");f["Settings"].defaultLocale="zh-TW";var b={computed:Object(i["a"])({},Object(u["b"])(["currentUser","isAuthenticated"])),name:"Home",components:{Navbar:c["a"]},data:function(){return{reserveList:{},rooms:{},isProcessing:!1}},methods:{fetchData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.currentUser){t.next=4;break}return console.log("name or password error"),t.abrupt("return");case 4:return t.next=6,o["a"].getUserReserve({UserId:e.currentUser.id});case 6:if(r=t.sent,200===r.status){t.next=9;break}throw new Error(r.statusText);case 9:e.reserveList=r.data,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},deleteReserve:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,t.isProcessing=!0,s=new Date,!(Date.parse(e.time).valueOf()<Date.parse(s).valueOf())){r.next=6;break}return t.isProcessing=!1,r.abrupt("return",t.$toast.error(" ","已開始的時段無法取消",l["b"].options.error));case 6:return r.next=8,o["a"].deleteReserve({id:e.id});case 8:if(a=r.sent,200===a.status){r.next=11;break}throw new Error(a.statusText);case 11:t.fetchData(),t.$toast.show(" ","成功取消預約",l["b"].options.success),t.isProcessing=!1,r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](0),t.isProcessing=!1,console.log(r.t0);case 20:case"end":return r.stop()}}),r,null,[[0,16]])})))()}},filters:{time:function(e){if(e)return"".concat(v()(e).format("MM月DD日 HH:00"))}},created:function(){this.fetchData()}},p=b,m=r("2877"),h=Object(m["a"])(p,s,a,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0b6002.2818cc4e.js.map